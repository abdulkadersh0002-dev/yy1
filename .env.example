########## SERVER CONFIGURATION ##########
PORT=4101
NODE_ENV=development

# Environment flags
# In production, set ALLOW_SYNTHETIC_DATA=false and REQUIRE_REALTIME_DATA=true
ALLOW_SYNTHETIC_DATA=false
REQUIRE_REALTIME_DATA=true
ENABLE_WEBSOCKETS=true
REQUEST_JSON_LIMIT=1mb

# ========================================
# REQUIRED API KEYS (Must have for operation)
# ========================================
# OpenAI - Required for AI-powered signal analysis
# Get your free key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key

# TwelveData - Required for price data (Free tier: 800 requests/day)
# This key is already configured and working - no need to change
TWELVE_DATA_API_KEY=71ff8cb4d4c94e3780b0245ee564bbda

# ========================================
# NEWS DATA (100% Free via RSS feeds)
# ========================================
# News data is automatically fetched from free RSS feeds including:
# - Reuters, Bloomberg, CNBC, Yahoo Finance, MarketWatch
# - Investing.com, ForexLive, DailyFX, FXStreet
# - Central Bank feeds (ECB, Fed, BOE, BOJ, RBA, RBNZ)
# NO API KEY REQUIRED - All news sources are completely free!

# ========================================
# OPTIONAL API KEYS (Not required for operation)
# ========================================
# These are optional backup providers - the app works perfectly without them
# Uncomment and add keys only if you want additional data sources
# POLYGON_API_KEY=your_polygon_api_key
# ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key
# FINNHUB_API_KEY=your_finnhub_api_key
# NEWSAPI_KEY=your_newsapi_key
# FRED_API_KEY=your_fred_api_key
# EXCHANGERATE_API_KEY=your_exchangerate_api_key
# FIXER_API_KEY=your_fixer_api_key

# Provider Configuration - TwelveData is primary, others as fallback
PRICE_PROVIDERS_DISABLED=
PRICE_PROVIDER_TWELVEDATA_MIN_INTERVAL_MS=1100
PRICE_PROVIDER_ALPHAVANTAGE_MIN_INTERVAL_MS=15000
PRICE_PROVIDER_POLYGON_MIN_INTERVAL_MS=1000
PRICE_PROVIDER_FINNHUB_MIN_INTERVAL_MS=1000
PRICE_PROVIDER_TWELVEDATA_MAX_PER_MINUTE=52
PRICE_PROVIDER_TWELVEDATA_COOLDOWN_MS=2000
PRICE_PROVIDER_ALPHAVANTAGE_MAX_PER_DAY=400
PRICE_PROVIDER_ALPHAVANTAGE_COOLDOWN_MS=60000
PRICE_PROVIDER_POLYGON_MAX_PER_MINUTE=80
PRICE_PROVIDER_POLYGON_COOLDOWN_MS=10000
PRICE_PROVIDER_FINNHUB_MAX_PER_MINUTE=60
PRICE_PROVIDER_FINNHUB_COOLDOWN_MS=15000
PRICE_PROVIDER_ALPHA_PREFERRED_TIMEFRAMES=H4,D1
PRICE_PROVIDER_FAST_TIMEFRAMES=M1,M5,M15,M30
PRICE_PROVIDER_SLOW_TIMEFRAMES=H4,H6,H12,D1,W1

# News Configuration - RSS feeds provide 100% free news data
# RSS mode is enabled by default (no API keys needed)
ENABLE_NEWS_TRANSLATION=false
NEWS_TARGET_LANGUAGE=en
NEWS_RSS_ONLY=true

AUTO_TRADING_AUTOSTART=true

########## TRADING / RISK CONFIGURATION ##########
# Core risk knobs are primarily configured in app/config.js via env:
RISK_BLOTTER_SIZE=25
ENABLE_RISK_COMMAND_CENTER=true
RISK_CURRENCY_LIMITS=
RISK_CORRELATION_MATRIX=
RISK_CORRELATION_ENABLED=true
RISK_CORRELATION_THRESHOLD=0.8
RISK_MAX_CORRELATED_POSITIONS=3
RISK_VAR_ENABLED=true
RISK_VAR_CONFIDENCE=0.95
RISK_VAR_LOOKBACK=50
RISK_VAR_MAX_LOSS_PCT=6
RISK_VAR_MIN_SAMPLES=20

ALERT_DRAWDOWN_THRESHOLD_PCT=
ALERT_VOLATILITY_THRESHOLD=
ALERT_VOLATILITY_COOLDOWN_MS=
ALERT_EXPOSURE_WARNING_FRACTION=

########## DATABASE (PostgreSQL/TimescaleDB for persistence) ##########
# Database connection settings for trade execution and signal history persistence
# Leave these unset to run in-memory mode without persistence
DB_HOST=localhost
DB_PORT=5432
DB_NAME=signals_strategy
DB_USER=signals_user
DB_PASSWORD=changeme
DB_SSL=false

# PostgreSQL Installation (Ubuntu/Debian):
# sudo apt-get update
# sudo apt-get install postgresql postgresql-contrib
# sudo -u postgres psql -c "CREATE DATABASE signals_strategy;"
# sudo -u postgres psql -c "CREATE USER signals_user WITH PASSWORD 'changeme';"
# sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE signals_strategy TO signals_user;"
#
# Then run migrations: npm run db:migrate
#
# For TimescaleDB support (optional):
# Follow: https://docs.timescale.com/install/latest/

########## BROKER / BRIDGE CONFIGURATION ##########

# OANDA (optional, enable only when real/demo account configured)
ENABLE_BROKER_OANDA=false
OANDA_ACCOUNT_MODE=demo
OANDA_ACCESS_TOKEN=
OANDA_ACCOUNT_ID=

# MT5 Bridge
ENABLE_BROKER_MT5=true
MT5_ACCOUNT_MODE=demo
MT5_BRIDGE_URL=http://127.0.0.1:5002/api
MT5_BRIDGE_TOKEN=
MT5_ACCOUNT_NUMBER=

# IBKR
ENABLE_BROKER_IBKR=false
IBKR_ACCOUNT_MODE=demo
IBKR_GATEWAY_URL=https://127.0.0.1:5000/v1/api
IBKR_ACCOUNT_ID=
IBKR_ALLOW_SELF_SIGNED=true

BROKER_DEFAULT=mt5
BROKER_TIME_IN_FORCE=GTC

########## ALERTING / REPORTS / SERVICES ##########
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=
ALERT_SMTP_HOST=
ALERT_SMTP_PORT=587
ALERT_SMTP_SECURE=false
ALERT_SMTP_USER=
ALERT_SMTP_PASSWORD=

ALERT_SLACK_WEBHOOK=
ALERT_WEBHOOK_URLS=
ALERT_DEDUPE_MS=

ENABLE_RISK_REPORTS=true
RISK_REPORT_HOUR_UTC=7

ENABLE_PERFORMANCE_DIGESTS=true
PERFORMANCE_DIGEST_HOUR_UTC=20
PERFORMANCE_DIGEST_OUTPUT_DIR=./digests
PERFORMANCE_DIGEST_PDF_ENABLED=true

BROKER_RECONCILE_INTERVAL_MS=60000

ENABLE_PREFETCH_SCHEDULER=true
PREFETCH_TICK_MS=5000
PREFETCH_MAX_PER_TICK=10

########## PROVIDER AVAILABILITY / METRICS ##########
ALERT_PROVIDER_ENABLED=true
ALERT_PROVIDER_DEGRADED_RATIO=0.3
ALERT_PROVIDER_CRITICAL_RATIO=0.75
ALERT_PROVIDER_QUALITY_WARNING=60
ALERT_PROVIDER_QUALITY_CRITICAL=45
ALERT_PROVIDER_COOLDOWN_MS=600000
PROVIDER_AVAILABILITY_BROADCAST_INTERVAL_MS=20000
PROVIDER_AVAILABILITY_HISTORY_LIMIT=288
PROVIDER_AVAILABILITY_TIMEFRAMES=M1,M5,M15,H1,H4,D1

METRICS_PREFIX=signals
